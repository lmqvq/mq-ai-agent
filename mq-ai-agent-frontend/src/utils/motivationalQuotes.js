/**
 * å¥èº«åŠ±å¿—è¯­å¥å·¥å…·æ¨¡å—
 * 
 * ç‰¹ç‚¹ï¼š
 * 1. åŸºäºæ—¥æœŸç§å­çš„ä¼ªéšæœºé€‰æ‹©ï¼ˆåŒä¸€å¤©æ˜¾ç¤ºåŒä¸€å¥è¯ï¼‰
 * 2. 14å¤©å†…ä¸é‡å¤
 * 3. å¥èº«ä¸»é¢˜çš„æ­£èƒ½é‡è¯­å¥
 */

// å¥èº«åŠ±å¿—è¯­å¥åº“ï¼ˆè‡³å°‘14æ¡ï¼Œç¡®ä¿ä¸¤å‘¨ä¸é‡å¤ï¼‰
const motivationalQuotes = [
  {
    text: "åšæŒæ˜¯æœ€å¥½çš„å¤©èµ‹ï¼Œä»Šå¤©çš„æ±—æ°´æ˜¯æ˜å¤©çš„å‹‹ç« ",
    emoji: "ğŸ’ª"
  },
  {
    text: "æ²¡æœ‰äººå¯ä»¥å›åˆ°è¿‡å»ï¼Œä½†æ¯ä¸ªäººéƒ½å¯ä»¥ä»ç°åœ¨å¼€å§‹",
    emoji: "ğŸŒŸ"
  },
  {
    text: "ä½ çš„èº«ä½“å¯ä»¥æ‰¿å—å‡ ä¹ä»»ä½•äº‹æƒ…ï¼Œéœ€è¦è¯´æœçš„æ˜¯ä½ çš„æ€æƒ³",
    emoji: "ğŸ§ "
  },
  {
    text: "ä¸è¦ç­‰å¾…å®Œç¾çš„æ—¶åˆ»ï¼ŒæŠ“ä½è¿™ä¸€åˆ»è®©å®ƒå˜å¾—å®Œç¾",
    emoji: "â°"
  },
  {
    text: "ä»Šå¤©çš„åŠªåŠ›æ˜¯ä¸ºäº†é‡è§æ›´å¥½çš„è‡ªå·±",
    emoji: "âœ¨"
  },
  {
    text: "æ¯ä¸€æ¬¡è®­ç»ƒéƒ½æ˜¯å¯¹è‡ªå·±çš„æŠ•èµ„ï¼Œå›æŠ¥ç‡æ°¸è¿œæ˜¯æ­£çš„",
    emoji: "ğŸ“ˆ"
  },
  {
    text: "å¼ºå£®ä¸æ˜¯æ‰“è´¥åˆ«äººï¼Œè€Œæ˜¯æˆ˜èƒœæ›¾ç»çš„è‡ªå·±",
    emoji: "ğŸ†"
  },
  {
    text: "å½“ä½ æƒ³æ”¾å¼ƒæ—¶ï¼Œæƒ³æƒ³ä¸ºä»€ä¹ˆå¼€å§‹",
    emoji: "ğŸ¯"
  },
  {
    text: "å¥åº·çš„èº«ä½“æ˜¯çµé­‚çš„å®¢å…ï¼Œç—…å¼±çš„èº«ä½“æ˜¯çµé­‚çš„ç›‘ç‹±",
    emoji: "ğŸ "
  },
  {
    text: "ç—›è‹¦æ˜¯æš‚æ—¶çš„ï¼Œæ”¾å¼ƒæ˜¯æ°¸è¿œçš„",
    emoji: "ğŸ”¥"
  },
  {
    text: "ä»Šå¤©ä¸èµ°ï¼Œæ˜å¤©è¦è·‘ã€‚ä»Šå¤©çš„æ±—æ°´ï¼Œæ˜å¤©çš„è£è€€",
    emoji: "ğŸƒ"
  },
  {
    text: "ä½ ä¸æ˜¯å› ä¸ºå˜è€è€Œåœæ­¢è¿åŠ¨ï¼Œä½ æ˜¯å› ä¸ºåœæ­¢è¿åŠ¨æ‰å˜è€",
    emoji: "âš¡"
  },
  {
    text: "æœ€å¥½çš„é¡¹ç›®æ˜¯ä½ çš„èº«ä½“ï¼Œæœ€å¥½çš„æŠ•èµ„æ˜¯ä½ çš„å¥åº·",
    emoji: "ğŸ’"
  },
  {
    text: "ä¸€æ­¥ä¸€æ­¥æ¥ï¼Œæ¯ä¸€æ­¥éƒ½ç®—æ•°",
    emoji: "ğŸ‘£"
  },
  {
    text: "æ±—æ°´æ˜¯è„‚è‚ªçš„çœ¼æ³ªï¼ŒåšæŒæ˜¯æˆåŠŸçš„é˜¶æ¢¯",
    emoji: "ğŸ’§"
  },
  {
    text: "ä½ çš„æé™ï¼Œåªæ˜¯åˆ«äººçš„èµ·ç‚¹ã€‚çªç ´å®ƒï¼",
    emoji: "ğŸš€"
  },
  {
    text: "å¥èº«æˆ¿æ²¡æœ‰å¥‡è¿¹ï¼Œåªæœ‰ç´¯ç§¯",
    emoji: "ğŸ‹ï¸"
  },
  {
    text: "ä»Šå¤©å¾ˆç´¯ï¼Œä½†æ˜å¤©çš„è‡ªå·±ä¼šæ„Ÿè°¢ç°åœ¨çš„ä»˜å‡º",
    emoji: "ğŸ™"
  },
  {
    text: "èº«ä½“æ˜¯é©å‘½çš„æœ¬é’±ï¼Œå¥åº·æ˜¯å¹¸ç¦çš„åŸºç¡€",
    emoji: "â¤ï¸"
  },
  {
    text: "æ¯æ¬¡è¿åŠ¨éƒ½æ˜¯ä¸€æ¬¡ä¸æ›´å¥½è‡ªå·±çš„çº¦ä¼š",
    emoji: "ğŸŒˆ"
  }
];

/**
 * è·å–ä¸€å¹´ä¸­çš„ç¬¬å‡ å¤©
 * @param {Date} date 
 * @returns {number}
 */
const getDayOfYear = (date) => {
  const start = new Date(date.getFullYear(), 0, 0);
  const diff = date - start;
  const oneDay = 1000 * 60 * 60 * 24;
  return Math.floor(diff / oneDay);
};

/**
 * è·å–ä»Šæ—¥åŠ±å¿—è¯­å¥
 * åŸºäºæ—¥æœŸç§å­ï¼ŒåŒä¸€å¤©è¿”å›ç›¸åŒçš„è¯­å¥
 * 14å¤©å†…ä¸é‡å¤ï¼ˆå‡è®¾è¯­å¥åº“ >= 14æ¡ï¼‰
 * 
 * @param {Date} [date=new Date()] æŒ‡å®šæ—¥æœŸï¼Œé»˜è®¤ä¸ºä»Šå¤©
 * @returns {{ text: string, emoji: string }}
 */
export const getDailyQuote = (date = new Date()) => {
  const dayOfYear = getDayOfYear(date);
  const index = dayOfYear % motivationalQuotes.length;
  return motivationalQuotes[index];
};

/**
 * è·å–æ ¼å¼åŒ–çš„åŠ±å¿—è¯­å¥ï¼ˆå¸¦ emojiï¼‰
 * @param {Date} [date=new Date()] 
 * @returns {string}
 */
export const getFormattedDailyQuote = (date = new Date()) => {
  const quote = getDailyQuote(date);
  return `${quote.emoji} ${quote.text}`;
};

/**
 * è·å–æ‰€æœ‰åŠ±å¿—è¯­å¥ï¼ˆç”¨äºæµ‹è¯•æˆ–å±•ç¤ºï¼‰
 * @returns {Array<{ text: string, emoji: string }>}
 */
export const getAllQuotes = () => {
  return [...motivationalQuotes];
};

export default {
  getDailyQuote,
  getFormattedDailyQuote,
  getAllQuotes
};
